<html>
<div id="rateContainer">
  <p>Based on the level of defaults (NPL rate) in the customer segment, there is a minimum loan interest rate needed to cover loan losses.</p>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.1.6.min.js"></script>
  <script type="text/javascript">
  
    var rate = d3.range(0, 1, 0.005),
        maxD, 
        i,
        data = [];
    maxD = rate.map(function(d) { 
        return d / (1 + d);
    });
    for (i=0; i<201; i++) {
        data.push({
            rateX: rate[i],
            maxD: maxD[i]
            rateY: rate[i]        
        })
    }
    function plotRate(data) {
        var svg5 = dimple.newSvg("#rateContainer", 590, 400);
        var myChart = new dimple.chart(svg5, data);
        var width = 300,
        height = 300,
        marginLeft = 60,
        marginTop = 30;
        myChart.setBounds(marginLeft, marginTop, width, height);
        // use visible measure axis to limit x-axis ticks
        var x1 = myChart.addMeasureAxis("x", "rateX");
        x1.ticks = 5;
        x1.tickFormat = ".0%";  
        x1.overrideMax = 1.0;
        var y1 = myChart.addMeasureAxis("y", "rateY");
        y1.ticks = 5;
        y1.overrideMax = 1.0;
        y1.tickFormat = ".0%";    
        var s1 = myChart.addSeries("maxD", dimple.plot.line);
        s1.aggregate = dimple.aggregateMethod.sum;
        myChart.addLegend(70, 45, 200, 20, "left");
        myChart.draw();
        x1.titleShape.text("Interest rate");
        y1.titleShape.text("NPL rate");
    }
    plotRate(data);
  </script>
</div>
</html>
